<% content_for(:body) do %>
  <lb-router id="router" sse="/lookbook/events">
    <lb-app
      id="app"
      version="<%= Lookbook::VERSION %>"
      persist-as="app"
      homepath="<%= lookbook_path %>"
    >
      <svg viewBox="0 0 18 22" slot="logo">
        <g
          stroke="currentColor"
          stroke-width="1.5"
          fill="none"
          fill-rule="evenodd"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M3.5 1H17v20H3.5A2.5 2.5 0 0 1 1 18.5v-15A2.5 2.5 0 0 1 3.5 1Z"></path>

          <path
            d="M1.153 19.36c0-.737.261-1.188.596-1.57.417-.475.985-.79 1.751-.79H17M6.801 5.1v7.554L6.8 12.7h5.57"
          ></path>
        </g>
      </svg>

      <% if Lookbook.pages.any? %>
        <lb-button
          href="<%= lookbook_latest_page_path %>"
          appearance="text"
          slot="header-link"
          <%= "active" if current_section?(:pages) %>
        >
          <lb-icon name="notebook-text"></lb-icon>
          <%= Lookbook.config.page_collection_label %>
        </lb-button>
      <% end %>

      <% if Lookbook.previews.any? %>
        <lb-button
          href="<%= lookbook_latest_spec_path %>"
          appearance="text"
          slot="header-link"
          <%= "active" if current_section?(:specs) %>
        >
          <lb-icon name="layers-2"></lb-icon>
          <%= Lookbook.config.preview_collection_label %>
        </lb-button>
      <% end %>

      <%= yield :sidebar %>
      <%= yield %>
    </lb-app>
  </lb-router>
<% end %>

<% if fetch_request? %>
  <%= yield :body %>
<% else %>
  <%= render template: "layouts/lookbook/skeleton" %>
<% end %>
