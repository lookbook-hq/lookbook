<% content_for(:body) do %>
  <lb-router id="router" sse="/lookbook/events">
    <lb-app
      id="app"
      version="<%= Lookbook::VERSION %>"
      persist-as="app"
      homepath="<%= lookbook_path %>"
    >
      <% if Lookbook.pages.any? %>
        <lb-button
          href="<%= lookbook_latest_page_path %>"
          appearance="text"
          slot="header-link"
          <%= "active" if current_section?(:pages) %>
        >
          <lb-icon name="notebook-text"></lb-icon>
          <%= Lookbook.config.page_collection_label %>
        </lb-button>
      <% end %>

      <% if Lookbook.previews.any? %>
        <lb-button
          href="<%= lookbook_latest_spec_path %>"
          appearance="text"
          slot="header-link"
          <%= "active" if current_section?(:specs) %>
        >
          <lb-icon name="layers-2"></lb-icon>
          <%= Lookbook.config.preview_collection_label %>
        </lb-button>
      <% end %>

      <%= yield :sidebar %>
      <%= yield %>
    </lb-app>
  </lb-router>
<% end %>

<% if fetch_request? %>
  <%= yield :body %>
<% else %>
  <%= render template: "layouts/lookbook/skeleton" %>
<% end %>
