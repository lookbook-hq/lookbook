<% embed_inspector_id = request_path_hash + @scenario.lookup_hash %>

<lb-embed-inspector persist-as="embed-inspector.<%= embed_inspector_id %>">
  <lb-viewport
    persist-as="embed-inspector.<%= embed_inspector_id %>.viewport"
    src="<%= @scenario.preview_path(request.query_parameters) %>"
    resize="horizontal"
    mode="responsive"
    toolbar
  ></lb-viewport>

  <lb-panel
    name="snippet"
    label="Snippet"
    id="embed-snippet-panel"
    slot="panel"
  >
    <lb-snippet lang="ruby" id="embed-source-snippet" numbered>
      <%= collate_source(@scenarios) %>
    </lb-snippet>
  </lb-panel>

  <lb-panel
    name="result"
    label="Result"
    id="embed-result-panel"
    slot="panel"
  >
    <lb-snippet lang="html" id="embed-result-snippet" numbered>
      <%= collate_output(@scenarios) %>
    </lb-snippet>
  </lb-panel>
</lb-embed-inspector>
